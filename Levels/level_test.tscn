[gd_scene load_steps=24 format=3 uid="uid://dxbo6h2bjofxy"]

[ext_resource type="Material" uid="uid://c5onvl33uien7" path="res://Assets/Materiais/M_floor.tres" id="1_7mba1"]
[ext_resource type="PackedScene" uid="uid://c8oxys0qhv8p2" path="res://Player/Player.tscn" id="2_soq8b"]
[ext_resource type="PackedScene" uid="uid://bedbvkbkcnvy8" path="res://Levels/game_menager.tscn" id="6_oenlu"]
[ext_resource type="PackedScene" uid="uid://c8p28dy6orraf" path="res://Levels/Menus/hud.tscn" id="7_ddaal"]
[ext_resource type="PackedScene" uid="uid://bw3ljwfcfprpl" path="res://Assets/WinterWatcherMap.fbx" id="7_ku5x2"]
[ext_resource type="PackedScene" uid="uid://pjwqtnt478rv" path="res://Levels/Objetos/painel_tv.tscn" id="7_q8e8m"]
[ext_resource type="PackedScene" uid="uid://3744hlicrup2" path="res://Levels/Objetos/MenuFechado.tscn" id="8_ku5x2"]
[ext_resource type="Shader" uid="uid://emm2gmau0t55" path="res://Shaders/postProcessing.gdshader" id="9_ddaal"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_ddaal"]
sky_horizon_color = Color(0.66224277, 0.6717428, 0.6867428, 1)
ground_horizon_color = Color(0.66224277, 0.6717428, 0.6867428, 1)

[sub_resource type="Sky" id="Sky_gxk0f"]
sky_material = SubResource("ProceduralSkyMaterial_ddaal")

[sub_resource type="Environment" id="Environment_xlufh"]
background_mode = 2
sky = SubResource("Sky_gxk0f")
tonemap_mode = 2
glow_enabled = true
fog_enabled = true
fog_light_color = Color(0.70957583, 0.7324372, 0.79593956, 1)
fog_sun_scatter = 0.5
fog_density = 0.02
fog_sky_affect = 0.7

[sub_resource type="ShaderMaterial" id="ShaderMaterial_xlufh"]
shader = ExtResource("9_ddaal")
shader_parameter/enabled = true
shader_parameter/dithering = true
shader_parameter/colors = 32
shader_parameter/dither_size = 1

[sub_resource type="Gradient" id="Gradient_6ieip"]
offsets = PackedFloat32Array(0, 0.4528302, 1)
colors = PackedColorArray(0.7641296, 0.7909432, 0.82733786, 1, 0.47007626, 0.4700758, 0.47007525, 1, 0.2627451, 0.2627451, 0.2627451, 0)

[sub_resource type="GradientTexture1D" id="GradientTexture1D_w54qd"]
gradient = SubResource("Gradient_6ieip")

[sub_resource type="Curve" id="Curve_p5spi"]
_data = [Vector2(0, 0), 0.0, 0.0, 0, 0, Vector2(0.4166667, 0.77528095), 0.0, 0.0, 0, 0, Vector2(0.98484856, 0.29213488), 0.0, 0.0, 0, 0]
point_count = 3

[sub_resource type="CurveTexture" id="CurveTexture_w0slw"]
curve = SubResource("Curve_p5spi")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_nxutr"]
emission_shape = 3
emission_box_extents = Vector3(16, 1, 16)
direction = Vector3(0, -1, 0)
initial_velocity_min = 3.0
initial_velocity_max = 6.0
gravity = Vector3(0, -5, 0)
tangential_accel_min = -8.000002
tangential_accel_max = 7.9999976
damping_max = 4.0
scale_min = 0.5
scale_curve = SubResource("CurveTexture_w0slw")
color_ramp = SubResource("GradientTexture1D_w54qd")

[sub_resource type="Gradient" id="Gradient_465so"]
offsets = PackedFloat32Array(0.3090909, 0.6363636)
colors = PackedColorArray(1, 1, 1, 1, 1, 1, 1, 1)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_tchvq"]
gradient = SubResource("Gradient_465so")
width = 65
fill = 1
fill_from = Vector2(0.5, 0.5)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_sdrm6"]
transparency = 1
shading_mode = 0
vertex_color_use_as_albedo = true
albedo_texture = SubResource("GradientTexture2D_tchvq")
billboard_mode = 1

[sub_resource type="QuadMesh" id="QuadMesh_ru4ou"]
material = SubResource("StandardMaterial3D_sdrm6")
size = Vector2(0.3, 0.3)

[sub_resource type="BoxShape3D" id="BoxShape3D_25mqr"]
size = Vector3(50, 1, 50)

[sub_resource type="BoxMesh" id="BoxMesh_stbmk"]
size = Vector3(50, 1, 50)

[node name="Level test" type="Node3D"]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_xlufh")

[node name="SubViewportContainer" type="SubViewportContainer" parent="."]
material = SubResource("ShaderMaterial_xlufh")
offset_right = 960.0
offset_bottom = 540.0

[node name="Snow" type="GPUParticles3D" parent="SubViewportContainer"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.62351227, 19.062958, 2.1440048)
amount = 256
lifetime = 3.5
visibility_aabb = AABB(-43.81296, -47.722363, -39.012207, 89.61482, 49.680996, 73.465546)
process_material = SubResource("ParticleProcessMaterial_nxutr")
draw_pass_1 = SubResource("QuadMesh_ru4ou")

[node name="Chao" type="StaticBody3D" parent="SubViewportContainer"]
collision_layer = 4

[node name="CollisionShape3D" type="CollisionShape3D" parent="SubViewportContainer/Chao"]
shape = SubResource("BoxShape3D_25mqr")

[node name="MeshInstance3D" type="MeshInstance3D" parent="SubViewportContainer/Chao"]
material_override = ExtResource("1_7mba1")
mesh = SubResource("BoxMesh_stbmk")

[node name="WinterWatcherMap" parent="SubViewportContainer" instance=ExtResource("7_ku5x2")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.26871395, 0.54112124, -3.9939728)

[node name="Player" parent="." instance=ExtResource("2_soq8b")]
transform = Transform3D(-4.371139e-08, 0, 1, 0, 1, 0, -1, 0, -4.371139e-08, 8.493918, 2.0298362, -4.767327)

[node name="PainelTV" parent="." instance=ExtResource("7_q8e8m")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -10.2044115, 0.5306486, -8.768848)

[node name="GameManager" parent="." node_paths=PackedStringArray("timer", "ui_label", "fade_rect", "end_label", "hud_anim") groups=["game_manager"] instance=ExtResource("6_oenlu")]
timer = NodePath("SessionTimer")
ui_label = NodePath("../HUD/UIRoot/TimerLabel")
fade_rect = NodePath("../HUD/UIRoot/ColorRect")
end_label = NodePath("../HUD/UIRoot/EndLabel")
hud_anim = NodePath("../HUD/UIRoot/EndAnimation")

[node name="SessionTimer" parent="GameManager" index="1"]
wait_time = 10.0

[node name="HUD" parent="." instance=ExtResource("7_ddaal")]

[node name="Tutorial" parent="." instance=ExtResource("8_ku5x2")]
transform = Transform3D(0.76713157, 0, 0.6414898, 0, 1, 0, -0.6414898, 0, 0.76713157, -10.581309, 1.5062757, -10.096537)

[node name="Marker3D" type="Marker3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.6652117, 0, 3.3273604)

[editable path="GameManager"]
[editable path="HUD"]
