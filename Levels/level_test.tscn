[gd_scene load_steps=20 format=3 uid="uid://dxbo6h2bjofxy"]

[ext_resource type="Material" uid="uid://c5onvl33uien7" path="res://Assets/Materiais/M_floor.tres" id="1_7mba1"]
[ext_resource type="Material" uid="uid://d4kduq14l2p4a" path="res://Shaders/SkyShaders/Sun.tres" id="1_xlufh"]
[ext_resource type="PackedScene" uid="uid://cw1bdifyfq853" path="res://Levels/cena_gameplay.tscn" id="5_3o0bi"]
[ext_resource type="PackedScene" uid="uid://bw3ljwfcfprpl" path="res://Assets/WinterWatcherMap.fbx" id="7_ku5x2"]
[ext_resource type="Shader" uid="uid://emm2gmau0t55" path="res://Shaders/postProcessing.gdshader" id="9_ddaal"]

[sub_resource type="Sky" id="Sky_w0slw"]
sky_material = ExtResource("1_xlufh")

[sub_resource type="Environment" id="Environment_w54qd"]
background_mode = 2
background_energy_multiplier = 1.32
sky = SubResource("Sky_w0slw")
ambient_light_source = 2
ambient_light_color = Color(0.3321949, 0.3607229, 0.33738258, 1)
tonemap_mode = 2
glow_enabled = true
fog_enabled = true
fog_light_color = Color(0.5370321, 0.57217056, 0.62682974, 1)
fog_light_energy = 3.97
fog_sky_affect = 0.0

[sub_resource type="ShaderMaterial" id="ShaderMaterial_xlufh"]
shader = ExtResource("9_ddaal")
shader_parameter/enabled = true
shader_parameter/dithering = true
shader_parameter/colors = 32
shader_parameter/dither_size = 1

[sub_resource type="Gradient" id="Gradient_6ieip"]
offsets = PackedFloat32Array(0, 0.4528302, 1)
colors = PackedColorArray(0.7641296, 0.7909432, 0.82733786, 1, 0.47007626, 0.4700758, 0.47007525, 1, 0.2627451, 0.2627451, 0.2627451, 0)

[sub_resource type="GradientTexture1D" id="GradientTexture1D_nxutr"]
gradient = SubResource("Gradient_6ieip")

[sub_resource type="Curve" id="Curve_p5spi"]
_data = [Vector2(0, 0), 0.0, 0.0, 0, 0, Vector2(0.4166667, 0.77528095), 0.0, 0.0, 0, 0, Vector2(0.98484856, 0.29213488), 0.0, 0.0, 0, 0]
point_count = 3

[sub_resource type="CurveTexture" id="CurveTexture_465so"]
curve = SubResource("Curve_p5spi")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_nxutr"]
emission_shape = 3
emission_box_extents = Vector3(16, 1, 16)
direction = Vector3(0, -1, 0)
initial_velocity_min = 3.0
initial_velocity_max = 6.0
gravity = Vector3(0, -5, 0)
tangential_accel_min = -8.000002
tangential_accel_max = 7.9999976
damping_max = 4.0
scale_min = 0.5
scale_curve = SubResource("CurveTexture_465so")
color_ramp = SubResource("GradientTexture1D_nxutr")

[sub_resource type="Gradient" id="Gradient_tchvq"]
offsets = PackedFloat32Array(0.3090909, 0.6363636)
colors = PackedColorArray(1, 1, 1, 1, 1, 1, 1, 1)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_tchvq"]
gradient = SubResource("Gradient_tchvq")
width = 65
fill = 1
fill_from = Vector2(0.5, 0.5)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_sdrm6"]
transparency = 1
shading_mode = 0
vertex_color_use_as_albedo = true
albedo_texture = SubResource("GradientTexture2D_tchvq")
billboard_mode = 1

[sub_resource type="QuadMesh" id="QuadMesh_ru4ou"]
material = SubResource("StandardMaterial3D_sdrm6")
size = Vector2(0.3, 0.3)

[sub_resource type="BoxShape3D" id="BoxShape3D_25mqr"]
size = Vector3(50, 1, 50)

[sub_resource type="BoxMesh" id="BoxMesh_stbmk"]
size = Vector3(50, 1, 50)

[node name="Level test" type="Node3D"]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_w54qd")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.5735764, 0.22441421, -0.78781253, 0, 0.96174115, 0.27395925, 0.819152, -0.15713653, 0.5516322, 0, 0, 0)
shadow_enabled = true

[node name="SubViewportContainer" type="SubViewportContainer" parent="."]
physics_interpolation_mode = 0
material = SubResource("ShaderMaterial_xlufh")
offset_right = 960.0
offset_bottom = 540.0

[node name="Snow" type="GPUParticles3D" parent="SubViewportContainer"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.62351227, 19.062958, 2.1440048)
amount = 256
lifetime = 3.5
visibility_aabb = AABB(-43.81296, -47.722363, -39.012207, 89.61482, 49.680996, 73.465546)
process_material = SubResource("ParticleProcessMaterial_nxutr")
draw_pass_1 = SubResource("QuadMesh_ru4ou")

[node name="Chao" type="StaticBody3D" parent="SubViewportContainer"]
collision_layer = 4

[node name="CollisionShape3D" type="CollisionShape3D" parent="SubViewportContainer/Chao"]
shape = SubResource("BoxShape3D_25mqr")

[node name="MeshInstance3D" type="MeshInstance3D" parent="SubViewportContainer/Chao"]
material_override = ExtResource("1_7mba1")
mesh = SubResource("BoxMesh_stbmk")

[node name="WinterWatcherMap" parent="SubViewportContainer" instance=ExtResource("7_ku5x2")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.26871395, 0.54112124, -3.9939728)

[node name="CenaGameplay" parent="." instance=ExtResource("5_3o0bi")]
